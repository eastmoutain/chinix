cscope 15 $HOME/project/chinix -q 0000000128 0000005009
	@kernel/arch.c

4 
	g_k¡ack
[4096] 
__©Œibu‹
((
®igÃd
(8)));

6 
__©Œibu‹
((
£ùiÚ
(".d©a"))è*
	gmuÉiboÙ_šfo
;

8 
__bss_¡¬t
, 
__bss_’d
;

	@kernel/arch/mmu.c

1 
	~<sys/ty³s.h
>

2 
	~<compž”.h
>

3 
	~<¬ch/mmu.h
>

4 
	~<¬ch/m­.h
>

6 
·ddr_t
 
	gpml4
[
NO_OF_PT_ENTRIES
] 
__ALIGNED
(
PAGE_SIZE
);

7 
·ddr_t
 
	gpdp
[
NO_OF_PT_ENTRIES
] 
__ALIGNED
(
PAGE_SIZE
);

8 
·ddr_t
 
	gpdp_high
[
NO_OF_PT_ENTRIES
] 
__ALIGNED
(
PAGE_SIZE
);

9 
·ddr_t
 
	g±e
[
NO_OF_PT_ENTRIES
] 
__ALIGNED
(
PAGE_SIZE
);

10 
·ddr_t
 
	glš—r_m­_pdp
[(64ULL << 30è/ (2ULL << 20)] 
__ALIGNED
(
PAGE_SIZE
);

	@kernel/include/arch/map.h

1 #iâdeà
MAP_H


2 
	#MAP_H


	)

4 
	~<sys/ty³s.h
>

5 
	~<¬ch/mmu.h
>

7 
ušt64_t
 
	t·ddr_t
;

8 
ušt64_t
 
	tvaddr_t
;

	@kernel/include/arch/mmu.h

1 #iâdeà
MMU_H


2 
	#MMU_H


	)

4 
	~<boÙ/k”Ãl_cfg.h
>

6 
	#X86_MMU_PG_P
 0x001

7 
	#X86_MMU_PG_RW
 0x002

8 
	#X86_MMU_PG_U
 0x004

9 
	#X86_MMU_PG_PS
 0x080

10 
	#X86_MMU_PG_PTE_PAT
 0x080

11 
	#X86_MMU_PG_G
 0x100

12 
	#X86_MMU_CLEAR
 0x0

	)

13 
	#X86_DIRTY_ACCESS_MASK
 0xf9f

	)

14 
	#X86_MMU_CACHE_DISABLE
 0x010

15 

	)

16 
	#X86_KERNEL_PD_FLAGS
 (
X86_MMU_PG_G
 + 
X86_MMU_PG_RW
 + 
X86_MMU_PG_P
)

	)

17 
	#X86_KERNEL_PD_LP_FLAGS
 (
X86_MMU_PG_G
 + 
X86_MMU_PG_PS
 + 
X86_MMU_PG_RW
 + 
X86_MMU_PG_P
)

	)

19 
	#X86_PDPT_ADDR_MASK
 (0x00000000fffffã0ul)

	)

20 
	#X86_PG_FRAME
 (0xfffffffffffff000ul)

	)

21 
	#X86_PHY_ADDR_MASK
 (0x000ffffffffffffful)

	)

22 
	#X86_FLAGS_MASK
 (0x0000000000000fffulè

	)

23 
	#X86_PTE_NOT_PRESENT
 (0xFFFFFFFFFFFFFFFEul)

	)

24 
	#X86_2MB_PAGE_FRAME
 (0x000ffffffã00000ul)

	)

25 
	#PAGE_OFFSET_MASK_4KB
 (0x0000000000000ffful)

	)

26 
	#PAGE_OFFSET_MASK_2MB
 (0x00000000001ffffful)

	)

27 
	#X86_MMU_PG_NX
 (1uÈ<< 63)

	)

29 
	#X86_PAGING_LEVELS
 4

	)

30 
	#PML4_SHIFT
 39

	)

31 
	#PDP_SHIFT
 30

	)

32 
	#PD_SHIFT
 21

	)

33 
	#PT_SHIFT
 12

	)

34 
	#PAGE_SHIFT
 12

	)

35 
	#ADDR_OFFSET
 9

	)

36 
	#PDPT_ADDR_OFFSET
 2

	)

37 
	#NO_OF_PT_ENTRIES
 512

	)

39 
	#PAGE_SIZE
 (1<<
PAGE_SHIFT
)

	)

41 
	#vœt2phys
(
x
è((
ušŒ_t
)(xè- 
KERNEL_SPACE_BASE
)

	)

42 
	#phys2vœt
(
x
è((
ušŒ_t
)(xè+ 
KERNEL_SPACE_BASE
)

	)

	@kernel/include/boot/descriptor.h

1 #iâdeà
DESCRIPTOR_H


2 
	#DESCRIPTOR_H


	)

8 
	#NULL_SELECTOR
 0x00

	)

11 
	#CODE_SELECTOR
 0x08

	)

12 
	#DATA_SELECTOR
 0x10

	)

13 
	#USER_CODE_32_SELECTOR
 0x18

	)

14 
	#USER_DATA_32_SELECTOR
 0x20

	)

17 
	#CODE_64_SELECTOR
 0x28

	)

18 
	#STACK_64_SELECTOR
 0x30

	)

19 
	#USER_CODE_64_SELECTOR
 0x38

	)

20 
	#USER_DATA_64_SELECTOR
 0x40

	)

22 
	#TSS_SELECTOR
 0x48

	)

	@kernel/include/boot/kernel_cfg.h

1 #iâdeà
KERNEL_CFG_H


2 
	#KERNEL_CFG_H


	)

4 
	#MEMBASE
 0

	)

5 
	#KERNEL_BASE
 0xffffffff80000000

	)

6 
	#KERNEL_LOAD_OFFSET
 0x00200000

	)

7 
	#KERNEL_ASPACE_BASE
 0xffffff8000000000UL

8 
	#KERNEL_ASPACE_SIZE
 0x0000008000000000UL

	)

9 
	#USER_ASPACE_BASE
 0x0000000000000000UL

	)

10 
	#USER_ASPACE_SIZE
 0x0000800000000000UL

	)

12 
	#PHYS_LOAD_ADDRESS
 (
MEMBASE
 + 
KERNEL_LOAD_OFFSET
)

	)

13 
	#PHYS_ADDR_DELTA
 (
KERNEL_BASE
 + 
KERNEL_LOAD_OFFSET
 - 
PHYS_LOAD_ADDRESS
)

	)

14 
	#PHYS
(
x
è((xè- 
PHYS_ADDR_DELTA
)

	)

	@kernel/include/compiler.h

1 #iâdeà
COMPILER_H


2 
	#COMPILER_H


	)

4 #ià
__GNUC__


6 
	#lik–y
(
x
è
	`__bužtš_ex³ù
(!!(x), 1)

	)

7 
	#uÆik–y
(
x
è
	`__bužtš_ex³ù
(!!(x), 0)

	)

8 
	#__UNUSED
 
	`__©Œibu‹__
((
__unu£d__
))

	)

9 
	#__PACKED
 
	`__©Œibu‹__
((
·cked
))

	)

10 
	#__ALIGNED
(
x
è
	`__©Œibu‹__
((
	`®igÃd
(x)))

	)

11 
	#__SECTION
(
x
è
	`__©Œibu‹__
((
	`£ùiÚ
(x)))

	)

12 
	#__PURE
 
	`__©Œibu‹__
((
pu»
))

	)

13 
	#__CONST
 
	`__©Œibu‹__
((cÚ¡))

	)

14 
	#__NO_RETURN
 
	`__©Œibu‹__
((
nÜ‘uº
))

	)

15 
	#__MALLOC
 
	`__©Œibu‹__
((
m®loc
))

	)

16 
	#__WEAK
 
	`__©Œibu‹__
((
w—k
))

	)

17 
	#__GNU_INLINE
 
	`__©Œibu‹__
((
gun_šlše
))

	)

18 
	#__GET_CALLER
(
x
è
	`__bužtš_»tuº_add»ss
(0)

	)

19 
	#__GET_FRAME
(
x
è
	`__bužtš_äame_add»ss
(0)

	)

20 
	#__NAKED
 
	`__©Œibu‹__
((
Çked
))

	)

21 
	#__ISCONSTANT
(
x
è
	`__bužtš_cÚ¡ªt_p
(x)

	)

22 
	#__NO_INLINE
(
x
è
	`__©Œibu‹__
((
nošlše
))

	)

23 
	#__CONSTRUCTOR
 
	`__©Œibu‹__
((
cÚ¡ruùÜ
))

	)

24 
	#__DESTRUCTOR
 
	`__©Œibu‹__
((
de¡ruùÜ
))

	)

25 
	#__OPTIMIZE
(
x
è
	`__©Œibu‹__
((
	`Ýtimize
(x)))

	)

28 
	#lik–y
(
x
è(x)

	)

29 
	#uÆik–y
(
x
è(x)

	)

30 
	#__UNUSED


	)

31 
	#__PACKED


	)

32 
	#__ALIGNE
(
x
)

	)

33 
	#__SECTION
(
x
)

	)

34 
	#__PURE


	)

35 
	#__CONST


	)

36 
	#__NO_RETURN


	)

40 #ifdeà
__ýlu¥lus


41 
	#__BEGIN_CDECLS
 "C" {

	)

42 
	#__END_CDECLS
 }

	)

44 
	#__BEGIN_CDECLS


	)

45 
	#__END_CDECLS


	)

	@kernel/include/sys/types.h

1 #iâdeà
TYPES_H


2 
	#TYPES_H


	)

4 
	~<lim™s.h
>

5 
	~<¡dšt.h
>

6 
	~<¡ddef.h
>

	@kernel/main.c

3 
	gbuf
[1024] = "123456";

5 
	$maš
()

7 *
buf
 = 1;

9 
	}
}

	@
1
.
0
9
217
kernel/arch.c
kernel/arch/mmu.c
kernel/include/arch/map.h
kernel/include/arch/mmu.h
kernel/include/boot/descriptor.h
kernel/include/boot/kernel_cfg.h
kernel/include/compiler.h
kernel/include/sys/types.h
kernel/main.c
